(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3422:(e,s,t)=>{Promise.resolve().then(t.bind(t,9485))},9485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(5155),a=t(4486),n=t(2619),l=t.n(n),d=t(2115),i=t(6489);function c(){var e,s;let{data:t}=(0,i.useSession)(),[n,c]=(0,d.useState)([]),[o,m]=(0,d.useState)(!0),[x,h]=(0,d.useState)(null);(0,d.useEffect)(()=>{let e=!1;return async function(){try{m(!0),h(null);let t=await fetch("/api/agents",{cache:"no-store"});if(!t.ok){var s;let e=await t.json().catch(()=>({}));throw Error(null!=(s=null==e?void 0:e.details)?s:"Failed to load agents.")}let r=await t.json();e||c(Array.isArray(r.agents)?r.agents:[])}catch(s){e||(h(s instanceof Error?s.message:"Unable to load dashboard data."),c([]))}finally{e||m(!1)}}(),()=>{e=!0}},[]);let u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},b={visible:{transition:{staggerChildren:.1}}},p=n.reduce((e,s)=>e+s.tokenUsage.total,0),j=n.reduce((e,s)=>e+s.tokenUsage.today,0);return(0,r.jsx)("main",{className:"min-h-screen p-8",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)(a.P.div,{initial:"hidden",animate:"visible",variants:b,className:"space-y-8",children:[(0,r.jsxs)(a.P.div,{variants:u,className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold tracking-tight mb-2",children:(0,r.jsx)("span",{className:"text-gradient",children:"Dashboard"})}),(0,r.jsx)("p",{className:"text-muted",children:"Monitor your AI employees and track usage"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"hidden text-xs text-muted md:inline",children:null!=(s=null==t||null==(e=t.user)?void 0:e.email)?s:"Local session"}),(0,r.jsx)("button",{onClick:()=>void(0,i.signOut)({callbackUrl:"/login"}),className:"px-4 py-3 rounded-xl border border-border bg-card text-sm font-semibold hover:border-primary/50 transition-colors",children:"Sign out"}),(0,r.jsx)(l(),{href:"/hire",children:(0,r.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary rounded-xl font-semibold text-sm hover:scale-105 transition-transform",children:"+ Hire Another"})})]})]}),(0,r.jsxs)(a.P.div,{variants:b,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(a.P.div,{variants:u,className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsx)("p",{className:"text-sm text-muted mb-1",children:"Active Employees"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:n.filter(e=>"active"===e.status).length})]}),(0,r.jsxs)(a.P.div,{variants:u,className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsx)("p",{className:"text-sm text-muted mb-1",children:"Tokens Today"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:j.toLocaleString()})]}),(0,r.jsxs)(a.P.div,{variants:u,className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsx)("p",{className:"text-sm text-muted mb-1",children:"Total Tokens"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:p.toLocaleString()})]})]}),(0,r.jsxs)(a.P.div,{variants:u,className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Your Team"}),o&&(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin"})}),!o&&x&&(0,r.jsx)("div",{className:"p-6 rounded-xl border border-red-500/30 bg-red-500/10",children:(0,r.jsx)("p",{className:"text-sm text-red-300",children:x})}),!o&&!x&&0===n.length&&(0,r.jsxs)("div",{className:"p-12 rounded-xl bg-card border border-border text-center",children:[(0,r.jsx)("p",{className:"text-muted mb-4",children:"No employees hired yet"}),(0,r.jsx)(l(),{href:"/hire",children:(0,r.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r from-primary to-secondary rounded-xl font-semibold text-sm hover:scale-105 transition-transform",children:"Hire Your First Employee"})})]}),!o&&!x&&n.length>0&&(0,r.jsx)("div",{className:"space-y-4",children:n.map(e=>{var s,t,n;return(0,r.jsxs)(a.P.div,{variants:u,className:"p-6 rounded-xl bg-card border border-border hover:border-primary/50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((e=>{switch(e){case"active":return"bg-green-500";case"idle":return"bg-yellow-500";case"stopped":return"bg-red-500";default:return"bg-gray-500"}})(e.status)," mt-1.5")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted",children:[null!=(n=e.role)?n:"AI Employee",e.backgroundName?" | ".concat(e.backgroundName):""]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-muted mb-1",children:"Status"}),(0,r.jsx)("p",{className:"text-sm font-medium capitalize",children:e.status})]})]}),e.currentTask&&(0,r.jsxs)("div",{className:"mb-4 p-3 rounded-lg bg-background/50",children:[(0,r.jsx)("p",{className:"text-xs text-muted mb-1",children:"Current Task"}),(0,r.jsx)("p",{className:"text-sm",children:e.currentTask})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted mb-1",children:"Tokens (Today)"}),(0,r.jsx)("p",{className:"font-medium",children:e.tokenUsage.today.toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted mb-1",children:"Tokens (Total)"}),(0,r.jsx)("p",{className:"font-medium",children:e.tokenUsage.total.toLocaleString()})]}),e.containerInfo&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted mb-1",children:"Port Range"}),(0,r.jsxs)("p",{className:"font-medium font-mono text-xs",children:[null==(s=e.containerInfo.portRange)?void 0:s.start," -"," ",null==(t=e.containerInfo.portRange)?void 0:t.end]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted mb-1",children:"Container"}),(0,r.jsx)("p",{className:"font-medium capitalize text-xs",children:e.containerInfo.status})]})]})]}),e.hiredAt?(0,r.jsxs)("p",{className:"mt-4 text-xs text-muted",children:["Hired ",new Date(e.hiredAt).toLocaleString()]}):null]},e.id)})})]})]})})})}}},e=>{e.O(0,[486,619,489,441,255,358],()=>e(e.s=3422)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{63:(e,a,t)=>{"use strict";var r=t(7260);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},4147:(e,a,t)=>{Promise.resolve().then(t.bind(t,5404))},5404:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(5155),s=t(4486),n=t(2619),i=t.n(n),l=t(63),o=t(2115),d=t(6489);function c(){let e=(0,l.useRouter)(),{status:a}=(0,d.useSession)(),t=(0,o.useRef)(!1),[n,c]=(0,o.useState)(""),[u,m]=(0,o.useState)(""),[x,p]=(0,o.useState)(!0),[h,b]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[y,v]=(0,o.useState)(!1),[N,j]=(0,o.useState)(null),[w,k]=(0,o.useState)(null),S=(0,o.useMemo)(()=>w?"OAuthSignin"===w||"OAuthCallback"===w?"Google sign-in failed. Check your OAuth credentials and callback URL.":"Could not complete sign-in. Please try again.":null,[w]),_=async()=>{let a=await fetch("/api/agents",{cache:"no-store"}),t=await a.json(),r=Array.isArray(t.agents)&&t.agents.length>0;e.replace(r?"/dashboard":"/hire")};(0,o.useEffect)(()=>{let e=localStorage.getItem("ai_employee_user_email");e&&c(e),k(new URLSearchParams(window.location.search).get("error"))},[]),(0,o.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/providers",{cache:"no-store"}),a=await e.json();b(!!a.google)}catch(e){b(!1)}}()},[]),(0,o.useEffect)(()=>{"authenticated"!==a||t.current||(t.current=!0,_())},[a]);let E=async e=>{if(e.preventDefault(),j(null),!n.includes("@"))return void j("Enter a valid email address.");if(u.length<6)return void j("Password must be at least 6 characters.");f(!0);try{x?localStorage.setItem("ai_employee_user_email",n):localStorage.removeItem("ai_employee_user_email");let e=await (0,d.signIn)("credentials",{redirect:!1,email:n,password:u});if(null==e?void 0:e.error)return void j("Invalid credentials. Check email/password and try again.");await _()}catch(e){j(e instanceof Error?e.message:"Login failed. Please try again.")}finally{f(!1)}},P=async()=>{j(null),v(!0),await (0,d.signIn)("google",{callbackUrl:"/login?oauth=google"})};return(0,r.jsxs)("main",{className:"relative min-h-screen overflow-hidden bg-background px-6 py-10 md:px-10",children:[(0,r.jsxs)(s.P.div,{"aria-hidden":"true",initial:{opacity:0},animate:{opacity:1},className:"pointer-events-none absolute inset-0",children:[(0,r.jsx)(s.P.div,{className:"absolute -left-20 top-20 h-72 w-72 rounded-full bg-primary/20 blur-3xl",animate:{x:[0,30,-10,0],y:[0,20,-15,0]},transition:{duration:14,repeat:1/0,ease:"easeInOut"}}),(0,r.jsx)(s.P.div,{className:"absolute -right-20 bottom-10 h-80 w-80 rounded-full bg-accent/20 blur-3xl",animate:{x:[0,-25,10,0],y:[0,-15,25,0]},transition:{duration:16,repeat:1/0,ease:"easeInOut"}})]}),(0,r.jsx)("div",{className:"relative mx-auto flex min-h-[85vh] max-w-6xl items-center justify-center",children:(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.6},className:"grid w-full overflow-hidden rounded-3xl border border-border bg-card/80 backdrop-blur md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"hidden border-r border-border p-10 md:flex md:flex-col md:justify-between",children:[(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)(i(),{href:"/",className:"inline-flex items-center text-sm text-muted hover:text-foreground",children:["<-"," Back home"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-2 text-sm uppercase tracking-[0.2em] text-primary",children:"Returning user"}),(0,r.jsx)("h1",{className:"text-4xl font-bold leading-tight",children:"Welcome back to your AI team."})]}),(0,r.jsx)("p",{className:"max-w-md text-sm text-muted",children:"Sign in with Google or your workspace credentials to continue."})]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-border bg-background/60 p-5",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-wider text-muted",children:"Single deployment tip"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-foreground/90",children:"You can lock credentials with `APP_LOGIN_PASSWORD` and `APP_LOGIN_ALLOWED_EMAILS` in root `.env`."})]})]}),(0,r.jsxs)("div",{className:"p-6 sm:p-10",children:[(0,r.jsxs)("div",{className:"mb-8 flex items-center justify-between md:hidden",children:[(0,r.jsxs)(i(),{href:"/",className:"text-sm text-muted hover:text-foreground",children:["<-"," Back"]}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-primary",children:"Login"})]}),(0,r.jsxs)("div",{className:"mb-6 space-y-2",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold",children:"Sign in"}),(0,r.jsx)("p",{className:"text-sm text-muted",children:"Continue with Google or use your email and password."})]}),(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("button",{type:"button",onClick:P,disabled:!h||y||g,className:"w-full rounded-xl border border-border bg-background px-4 py-3 text-sm font-semibold transition hover:border-primary/50 disabled:cursor-not-allowed disabled:opacity-60",children:y?"Redirecting to Google...":"Continue with Google"}),h?null:(0,r.jsx)("p",{className:"mt-2 text-xs text-muted",children:"Google OAuth is not configured yet. Add `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET` in `.env`."})]}),(0,r.jsxs)("div",{className:"mb-5 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-px flex-1 bg-border"}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.15em] text-muted",children:"or"}),(0,r.jsx)("div",{className:"h-px flex-1 bg-border"})]}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-foreground/90",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",value:n,onChange:e=>c(e.target.value),className:"w-full rounded-xl border border-border bg-background px-4 py-3 outline-none transition focus:border-primary",placeholder:"you@company.com",autoComplete:"email",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"password",className:"text-sm font-medium text-foreground/90",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>m(e.target.value),className:"w-full rounded-xl border border-border bg-background px-4 py-3 outline-none transition focus:border-primary",placeholder:"Enter password",autoComplete:"current-password",required:!0})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3 text-sm text-muted",children:[(0,r.jsx)("input",{type:"checkbox",checked:x,onChange:e=>p(e.target.checked),className:"h-4 w-4 rounded border-border bg-background text-primary"}),"Remember my email on this device"]}),S?(0,r.jsx)("p",{className:"rounded-lg border border-amber-500/30 bg-amber-500/10 px-3 py-2 text-sm text-amber-200",children:S}):null,N?(0,r.jsx)("p",{className:"rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:N}):null,(0,r.jsxs)("button",{type:"submit",disabled:g||y,className:"group relative w-full overflow-hidden rounded-xl bg-gradient-to-r from-primary to-secondary px-5 py-3 font-semibold text-white transition-transform hover:scale-[1.01] disabled:cursor-not-allowed disabled:opacity-70",children:[(0,r.jsx)("span",{className:"relative z-10",children:g?"Signing in...":"Sign in with password"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-secondary to-accent opacity-0 transition-opacity group-hover:opacity-100"})]})]})]})]})})]})}}},e=>{e.O(0,[486,619,489,441,255,358],()=>e(e.s=4147)),_N_E=e.O()}]);